<!DOCTYPE html>
<html ng-app="dopeslingerApp">
<head>
    <title>Dope slinger tycoon</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Awesome free browser game where you take the role of a drug kingpin">
    <meta name="keywords" content="Incremental game,JavaScript,Dope,Drugs,Weed,Game,Clicker,Idle">
    <meta name="author" content="jamesgittins.com">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/angular-sanitize.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/ui-bootstrap-tpls-0.11.2.min.js"></script>
    <script src="js/seedrandom.min.js"></script>
    <script src="js/angulardope.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        resetGame = function () {
            localStorage.clear();
            window.location.reload();
        }
    </script>
    <style>

        @font-face {
            font-family: whoa;
            src: url(fonts/UrbanJungleDEMO.otf);
        }
        .nav, .pagination, .carousel, .panel-title a { cursor: pointer; }
        body { padding-bottom:20px; }

        span.inline-glyph {margin-right:2px; }

        .iconyellow{color:#ffc107;}
        .iconred { color: #e51c23; font-size: 18px; float: left; margin-right:-16px; }
        .dealer-warning { color:#e51c23; font-weight:bold; }

        .progress { margin: 0; height:5px;border-radius:0; }
        div.progress-bar {background-color:#259b24;background-image:none;}

        .icongreen { color: #259b24; font-size: 18px; float: left;  margin-right:-16px; }

        .production {color:#0d5302;}
        .production-header {color:#259b24;}
        .btn-production {color:#0d5302;border-color:#72d572;}

        .distribution {color:#311b92;}
        .distribution-header {color:#673ab7;}
        .btn-distribution {color:#311b92;border-color:#b39ddb;}

        .upgrade {color:#bf360c;}
        .upgrade-header {color:#ff5722;}
        .btn-upgrade {color:#bf360c;border-color:#ffab91;}

        .form-control{height:auto;color:inherit;}

        .strong { font-weight: bold; }
        h1.street {font-family:whoa;font-size:74px;}
        span.current-cash {font-size:20px;}
        @viewport {
            zoom: 1.0;
        }

        button.btn.options-button {
            margin-bottom: 10px;
        }

        button.btn {
            width: 100%;
            border-radius:0;
        }
        span.qty {
            float:left;
            font-size:18px;
            font-weight:bold;
            margin-right:-18px;
        }

        div.dealer-content,
        div.dealer {
            border:1px solid #673ab7;
            color:#311b92;
        }
        div.dealer.open {
            background-color:#673ab7;
        }

        div.drug-content,
        div.drug {
            border:1px solid #259b24;
            color:#0d5302;
        }

        div.drug.open {
            background-color:#259b24;
        }

        div.dealer-content,
        div.drug-content {
            margin:0 0 5px;
            max-height:9999px;
            border-top:none;
            padding:12px 0;
        }

        div.dealer-content button > span.glyphicon,
        div.drug-content button > span.glyphicon {
            margin-right:-18px;
        }

        div.dealer,
        div.drug {
            margin:10px 0 0;
            padding:6px 12px;
            text-align:center;
            cursor:pointer;
        }

        div.dealer > span.glyphicon,
        div.drug > span.glyphicon {
            float:right;
            display:none;
            font-size: 18px;
            margin-left:-18px;
        }

        div.dealer:hover > span.glyphicon,
        div.drug:hover > span.glyphicon {
            display:inline;
        }

        div.dealer.open,
        div.drug.open {
            color:white;
        }

        .weed {
            color: #00A000;
        }

        label {
            float: left;
            margin-top: 20px;
        }

        .checkbox {
            float: left;
            margin: 20px 0 0 10px !important;
        }
    </style>
</head>
<body ng-controller="DopeController">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 hidden-xs">
                <!-- dopeslinger -->
                <ins class="adsbygoogle"
                     style="display:inline-block;width:728px;height:90px"
                     data-ad-client="ca-pub-5746977543491330"
                     data-ad-slot="1058480603"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            <div class="col-xs-12 col-sm-9 col-md-10">
                <h1 class="street" ng-show="!gameModel.workMode"><span class="production-header">Dope</span> <span class="distribution-header">slinger</span> <span class="upgrade-header">tycoon</span></h1>
                <p ng-show="!gameModel.workMode" class="production"><strong>Buy canabis plants to grow weed. Hire dealers to sell the weed.</strong></p>
            </div>

            <div class="col-xs-12 col-sm-3 col-md-2">
                <button onclick="$('#optionsModal').modal('show');" class="btn btn-default options-button"><span class="iconred glyphicon glyphicon-cog"></span> Options</button>
            </div>

            <div class="col-xs-12 col-sm-6">
                <p class="production strong">Current cash: <span class="current-cash upgrade" tooltip="Total earned {{gameModel.totalCashEarned|money}}">{{gameModel.cash|money}}</span></p>
            </div>

            <div class="col-xs-12 col-sm-6" id="log">

            </div>

            <div class="clearfix"></div>

            <div class="col-xs-12 col-sm-4">
                <h3 class="strong production-header">Production</h3>
                <div ng-repeat="drug in gameModel.drugs track by $index" ng-show="drug.visible">
                    <div class="drug" ng-click="selectDrug(drug)" ng-class="{'open' : drug.selected}"><strong>{{drug.name}} {{drug.qty|weight}}</strong>
                        <span class="glyphicon" ng-class="drug.selected ? 'glyphicon-chevron-up' : 'glyphicon-chevron-down'"></span></div>
                    <div class="drug-content row" collapse="!drug.selected">
                        <p class="col-xs-6" tooltip="You are producing {{drugMadePerSecond(drug)|weight}} of {{drug.name.toLowerCase()}} per second"><span class="glyphicon glyphicon-arrow-up inline-glyph icongreen"></span>{{drugMadePerSecond(drug)|weight}} / sec</p>
                        <p class="col-xs-6" tooltip="Your dealers are able to sell {{drugSoldPerSecond(drug)|weight}} of {{drug.name.toLowerCase()}} per second"><span class="glyphicon glyphicon-arrow-down inline-glyph iconred"></span>{{drugSoldPerSecond(drug)|weight}} / sec</p>
                        <div class="col-xs-12" ng-repeat="producer in producersForDrug(drug)" tooltip="Buy a {{producer.name.toLowerCase()}} to increase your {{drug.name.toLowerCase()}} production by {{producer.prodPerUnit|weight}} per second">
                            <button class="btn btn-default btn-production" ng-click="increaseProduction(producer)" ng-disabled="gameModel.cash < productionPrice(producer)">
                                <span class="qty">{{producer.qty}}</span>{{producer.name}} (<strong>{{productionPrice(producer)|money}}</strong>)
                            </button>
                            <progressbar animate="false" value="cashPercentage(productionPrice(producer))" ng-class="gameModel.cash < productionPrice(producer) ? 'active progress-striped' : 'progress-bar-success'"></progressbar>
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-xs-12 col-sm-4">
                <h3 class="strong distribution-header">Distribution</h3>
                <button ng-click="hireDealerModal()" class="btn btn-default btn-distribution" type="button" id="hire-dealer-button" tooltip="Hire another dealer">
                    <span class="glyphicon icongreen glyphicon-user"></span> Hire dealer <span class="dealer-count strong">{{gameModel.dealers.length + '/' + (1 + gameModel.territoryUpgrades)}}</span>
                </button>
                <div class="dealer-ui" ng-repeat="dealer in gameModel.dealers track by $index" data-dealer-seed="{{dealer.seed}}">
                    <div class="dealer" ng-class="{'open':dealer.selected}" ng-click="selectDealer(dealer)"><strong>{{dealer.name}} ({{dealer.drug}})</strong><span class="glyphicon" ng-class="dealer.selected ? 'glyphicon-chevron-up' : 'glyphicon-chevron-down'"></span></div>
                    <div class="dealer-content row" collapse="!dealer.selected">
                        <p class="col-xs-12">Cash earned: <strong>{{dealer.cashEarned|money}}</strong></p>
                            <p class="col-xs-12 col-sm-5">Currently selling:</p>
                            <span class="col-xs-12 col-sm-7">
                                <select class="form-control" ng-model="dealer.drug" tooltip="Select which drug you want this dealer to sell">
                                    <option ng-repeat="drug in gameModel.drugs track by $index" ng-show="drug.visible">{{drug.name}}</option>
                                </select>
                            </span>
                        <p class="col-xs-12">Volume: <span class="volume iconyellow" ng-bind-html="getStars(dealer.volume,5)"></span></p>
                        <p class="col-xs-12">Price: <span class="price iconyellow" ng-bind-html="getStars(dealer.price,5)"></span></p>
                        <div class ="col-xs-12">
                            <button class="btn btn-default btn-distribution" ng-click="fireDealer(dealer.seed)"><span class="glyphicon iconred glyphicon-user"></span>Fire {{dealer.name.split(' ')[0]}}</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xs-12 col-sm-4">
                <h3 class="strong upgrade-header">Upgrades</h3>
                <div tooltip="Expand your territory, allowing you to hire an additional dealer">
                    <button ng-click="expandTerritory()" class="btn btn-default btn-upgrade" ng-disabled="gameModel.cash < priceOfTerritory()" type="button"><span class="glyphicon glyphicon-globe icongreen"></span> Expand territory (<strong>{{priceOfTerritory()|money}}</strong>)</button>
                    <progressbar animate="false" value="cashPercentage(priceOfTerritory())" ng-class="gameModel.cash < priceOfTerritory() ? 'active progress-striped' : 'progress-bar-success'"></progressbar>
                </div>
            </div>

        </div>

    </div>

    <div class="modal fade" id="hireDealerModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">Hire dealer</h4>
                </div>
                <div class="modal-body row">
                    <p class="col-xs-12 dealer-warning" ng-show="gameModel.dealers.length >= gameModel.territoryUpgrades + 1">You already have the maximum number of dealers working for you. Either fire a dealer or expand your territory to hire another.</p>
                    <div class="col-xs-12 col-sm-4" ng-repeat="dealer in hireDealers">
                        <p><span class="distribution strong">{{dealer.name}}</span></p>
                        <p>Volume: <span class="volume iconyellow" ng-bind-html="getStars(dealer.volume,5)"></span></p>
                        <p>Price: <span class="price iconyellow" ng-bind-html="getStars(dealer.price,5)"></span></p>
                        <button class="btn btn-default btn-distribution" ng-click="hireDealer(dealer.seed)" ng-disabled="gameModel.dealers.length >= gameModel.territoryUpgrades + 1 || dealerHired(dealer.seed)">Hire dealer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="optionsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">Options</h4>
                </div>
                <div class="modal-body row">
                    <div class="col-xs-12 col-sm-6">
                        <button onclick="if (confirm('This will reset all progress, are you sure?')) { resetGame(); }" class="btn btn-default"><span class="glyphicon iconred glyphicon-exclamation-sign"></span> Reset game</button>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                        <button ng-click="toggleWorkMode()" class="btn btn-default"><span class="glyphicon glyphicon-filter iconred"></span> Toggle work mode</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
